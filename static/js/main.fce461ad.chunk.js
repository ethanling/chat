(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(19)},16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(10),o=n.n(r),c=(n(16),n(2)),i=n(3),u=n(5),m=n(4),l=n(6),h=n(1),p=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={username:""},n.onChange=n.onChange.bind(Object(h.a)(Object(h.a)(n))),n.onSubmit=n.onSubmit.bind(Object(h.a)(Object(h.a)(n))),n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){this.setState({username:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(this.state.username)}},{key:"render",value:function(){return s.a.createElement("div",{className:"signin-container"},s.a.createElement("div",{className:"signin-form"},s.a.createElement("h1",null,"Login"),s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("input",{className:"input-box",name:"username",type:"text",placeholder:"Username",onChange:this.onChange}),s.a.createElement("input",{className:"input-box",name:"password",type:"password",placeholder:"Password"}),s.a.createElement("input",{className:"submit-button",type:"submit"}))))}}]),t}(s.a.Component),b=n(8),d=n(7),g=n.n(d),f=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).formatDate=e.formatDate.bind(Object(h.a)(Object(h.a)(e))),e}return Object(l.a)(t,e),Object(i.a)(t,[{key:"formatDate",value:function(e){var t,n=new Date(e),a=n.getMinutes(),s=n.getHours();return s>12&&(s-=12,t=!0),"".concat(s,":").concat(a).concat(t?"pm":"am")}},{key:"render",value:function(){var e=this;return s.a.createElement("ul",null,this.props.messages.map(function(t,n){return s.a.createElement("li",{key:n,className:"message-container"},s.a.createElement("div",{className:"message"},s.a.createElement("span",{className:"message-user"},t.senderId,s.a.createElement("span",{className:"message-time"},e.formatDate(t.createdAt))),s.a.createElement("p",null,t.text)))}))}}]),t}(s.a.Component),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={text:""},n.onChange=n.onChange.bind(Object(h.a)(Object(h.a)(n))),n.onSubmit=n.onSubmit.bind(Object(h.a)(Object(h.a)(n))),n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){this.setState({text:e.target.value}),this.props.onChange&&this.props.onChange()}},{key:"onSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(this.state.text),this.setState({text:""})}},{key:"render",value:function(){return s.a.createElement("div",{className:"message-form"},s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("input",{className:"message-input",type:"text",placeholder:"What is your message?",onChange:this.onChange,value:this.state.text}),s.a.createElement("input",{type:"submit",className:"message-send"})))}}]),t}(s.a.Component),j=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return 0===this.props.usersWhoAreTyping.length?s.a.createElement("p",null):1===this.props.usersWhoAreTyping.length?s.a.createElement("p",null,this.props.usersWhoAreTyping[0]," is typing ..."):this.props.usersWhoAreTyping.length>1?s.a.createElement("p",null,this.props.usersWhoAreTyping.join(" and ")," are typing ..."):void 0}}]),t}(a.Component),v=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.users?s.a.createElement("ul",{className:"user-list"},this.props.users.map(function(e,t){return s.a.createElement("li",{className:"user-list-item",key:e.name},s.a.createElement("div",{className:"online"===e.presence.state?"user-status user-online":"user-status user-offline"}),s.a.createElement("span",{className:"user-list-name"},e.name))})):s.a.createElement("div",{className:"loader-container"},s.a.createElement("div",{className:"loader"}))}}]),t}(a.Component),y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={currentUser:{},currentRoom:{},usersWhoAreTyping:[],messages:[]},n.sendMessage=n.sendMessage.bind(Object(h.a)(Object(h.a)(n))),n.sendTypingEvent=n.sendTypingEvent.bind(Object(h.a)(Object(h.a)(n))),n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"sendMessage",value:function(e){this.state.currentUser.sendMessage({text:e,roomId:this.state.currentRoom.id})}},{key:"sendTypingEvent",value:function(){this.state.currentUser.isTypingIn({roomId:this.state.currentRoom.id}).catch(function(e){return console.error(e)})}},{key:"componentDidMount",value:function(){var e=this;"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/chat"}).APP_URL,":").concat(Object({NODE_ENV:"production",PUBLIC_URL:"/chat"}).PORT,"/authenticate");new g.a.ChatManager({instanceLocator:"v1:us1:311aa8b8-2ce9-435a-b289-991ed13030e6",userId:this.props.currentUsername,tokenProvider:new g.a.TokenProvider({url:"http://localhost:3001/authenticate"})}).connect().then(function(t){return e.setState({currentUser:t}),t.subscribeToRoom({roomId:19375106,messageLimit:100,hooks:{onNewMessage:function(t){e.setState({messages:Object(b.a)(e.state.messages).concat([t])})},onUserStartedTyping:function(t){e.setState({usersWhoAreTyping:Object(b.a)(e.state.usersWhoAreTyping).concat([t.name])})},onUserStoppedTyping:function(t){e.setState({usersWhoAreTyping:e.state.usersWhoAreTyping.filter(function(e){return e!==t.name})})},onUserCameOnline:function(){return e.forceUpdate()},onUserWentOffline:function(){return e.forceUpdate()},onUserJoined:function(){return e.forceUpdate()}}})}).then(function(t){e.setState({currentRoom:t})}).catch(function(e){return console.error(e)})}},{key:"render",value:function(){return s.a.createElement("div",{style:{display:"flex",height:"100vh",backgroundColor:"#F8F8F9"}},s.a.createElement("div",{className:"sidebar"},s.a.createElement(v,{users:this.state.currentRoom.users})),s.a.createElement("div",{className:"message-view"},s.a.createElement("div",{style:{flex:1,width:"100%"}},s.a.createElement(f,{messages:this.state.messages})),s.a.createElement(j,{usersWhoAreTyping:this.state.usersWhoAreTyping}),s.a.createElement(O,{onSubmit:this.sendMessage,onChange:this.sendTypingEvent})))}}]),t}(s.a.Component),E=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={currentScreen:"WhatIsYourUsernameScreen",currentUsername:""},e.onUsernameSubmitted=e.onUsernameSubmitted.bind(Object(h.a)(Object(h.a)(e))),e}return Object(l.a)(t,e),Object(i.a)(t,[{key:"onUsernameSubmitted",value:function(e){var t=this;fetch("http://localhost:3001/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})}).then(function(n){t.setState({currentUsername:e,currentScreen:"Chatscreen"})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return"WhatIsYourUsernameScreen"===this.state.currentScreen?s.a.createElement(p,{onSubmit:this.onUsernameSubmitted}):s.a.createElement(y,{currentUsername:this.state.currentUsername})}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,2,1]]]);
//# sourceMappingURL=main.fce461ad.chunk.js.map